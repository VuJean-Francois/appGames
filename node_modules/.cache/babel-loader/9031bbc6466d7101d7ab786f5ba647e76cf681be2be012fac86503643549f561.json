{"ast":null,"code":"import React,{useContext,useState}from\"react\";import{Link}from\"react-router-dom\";import BookmarksContext from\"./BookmarksContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Home=()=>{const{bookmarks,setBookmarks}=useContext(BookmarksContext);const[searchText,setSearchtext]=useState('');// Ajouter cela\n// suite de la fonction...\n// On utilise un state pour garder nos données\nconst[games,setGames]=useState([]);const handleSearch=e=>{e.preventDefault();const apiKey='e120dbbbcabe4175b4696383606d8339';const url=\"https://api.rawg.io/api/games?key=\".concat(apiKey,\"&search=\").concat(encodeURI(searchText));fetch(url).then(response=>response.json()).then(data=>{setGames(data.results);}).catch(()=>{alert('Une erreur est survenue');});};const isBookmarked=id=>!!bookmarks.find(bookmark=>bookmark.id===id);const addBookmark=game=>{if(isBookmarked(game.id)){// A supprimer\nconst index=bookmarks.indexOf(game);const tmp=[...bookmarks];tmp.splice(index,1);setBookmarks(tmp);}else{const tmp=[...bookmarks];tmp.push(game);setBookmarks(tmp);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-xl \",children:/*#__PURE__*/_jsxs(\"form\",{className:\"my-2 sm:w-full md:w-2/3 mx-auto flex items-center px-2 text-2x1\",onSubmit:handleSearch,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",autoFocus:true,onInput:e=>{setSearchtext(e.target.value);},value:searchText,placeholder:\"Rechercher\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-700 rounded-r text-white px-4 py-2\",children:\"Rechercher\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-xl\",children:[/*#__PURE__*/_jsx(Link,{className:\"bg-blue-700 rounded text-white px-4 py-2 mx-5\",to:'/bookmarks',children:\"Favoris\"}),/*#__PURE__*/_jsx(Link,{className:\"bg-blue-700 rounded text-white px-4 py-2 mx-5\",to:'/shop',children:\"Mon Magasin\"})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"sm:w-full md:w-2/3 mx-auto px-2 text-2x1\",children:games.map(game=>/*#__PURE__*/_jsxs(\"li\",{className:\"py-2 px-4 border-b border-gray-500\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/details/\".concat(game.slug),className:\"flex\",children:[/*#__PURE__*/_jsx(\"img\",{src:game.background_image,alt:\"\",className:\"w-24 pr-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2x1 font-bold\",children:game.name}),/*#__PURE__*/_jsx(\"div\",{children:game.rating})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex-grow\",onClick:()=>{addBookmark(game);},children:[isBookmarked(game.id)?\"★\":\"☆\",\" \"]})]},game.id))})]});};export default Home;","map":{"version":3,"names":["React","useContext","useState","Link","BookmarksContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Home","bookmarks","setBookmarks","searchText","setSearchtext","games","setGames","handleSearch","e","preventDefault","apiKey","url","concat","encodeURI","fetch","then","response","json","data","results","catch","alert","isBookmarked","id","find","bookmark","addBookmark","game","index","indexOf","tmp","splice","push","children","className","onSubmit","type","autoFocus","onInput","target","value","placeholder","to","map","slug","src","background_image","alt","name","rating","onClick"],"sources":["C:/Users/jean-fra.vu/Documents/React/games/src/pages/Home.js"],"sourcesContent":["import React, { useContext, useState} from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport BookmarksContext from \"./BookmarksContext\";\r\n \r\nconst Home = () => {\r\n    const { bookmarks, setBookmarks } = useContext(BookmarksContext);\r\n \r\n    const [searchText, setSearchtext] = useState (''); // Ajouter cela\r\n    // suite de la fonction...\r\n \r\n    // On utilise un state pour garder nos données\r\n    const [games, setGames] = useState([]);\r\n \r\nconst handleSearch = (e) => {\r\n    e.preventDefault();\r\n \r\n    const apiKey = 'e120dbbbcabe4175b4696383606d8339';\r\n    const url = `https://api.rawg.io/api/games?key=${apiKey}&search=${encodeURI(searchText)}`;\r\n    fetch(url)\r\n    .then(response => response.json() )\r\n    .then( data => { setGames(data.results) } )\r\n    .catch( () => { alert('Une erreur est survenue') } )\r\n}\r\n \r\nconst isBookmarked = (id) => !!(bookmarks.find( bookmark => bookmark.id === id));\r\n \r\nconst addBookmark = (game) => {\r\n    if (isBookmarked(game.id)) {\r\n        // A supprimer\r\n        const index = bookmarks.indexOf(game);\r\n        const tmp = [...bookmarks];\r\n        tmp.splice(index, 1);\r\n        setBookmarks(tmp);\r\n        } else {\r\n        const tmp = [...bookmarks];\r\n        tmp.push(game);\r\n        setBookmarks(tmp);\r\n        }\r\n    }\r\n \r\n \r\n    return (\r\n        <> {/* Un fragment doit être ajouté pour me retourner qu'un seul composant */}\r\n        <div className=\"text-center text-xl \">\r\n        <form className=\"my-2 sm:w-full md:w-2/3 mx-auto flex items-center px-2 text-2x1\" onSubmit={handleSearch} >\r\n            \r\n\r\n                <input type=\"text\" className=\"form-control\" autoFocus={true} onInput={ e => { setSearchtext(e.target.value) } } value={searchText} placeholder=\"Rechercher\" />\r\n                <button type=\"submit\" className=\"bg-blue-700 rounded-r text-white px-4 py-2\">Rechercher</button>\r\n            \r\n        </form>\r\n        </div>\r\n \r\n        {/* Ajoutons notre liste */}\r\n        <div className=\"text-center text-xl\">\r\n        <Link className=\"bg-blue-700 rounded text-white px-4 py-2 mx-5\" to={'/bookmarks'}>Favoris</Link>\r\n        <Link className=\"bg-blue-700 rounded text-white px-4 py-2 mx-5\" to={'/shop'}>Mon Magasin</Link>\r\n        </div>\r\n        <ul className=\"sm:w-full md:w-2/3 mx-auto px-2 text-2x1\">\r\n            {games.map(game => (\r\n                <li className=\"py-2 px-4 border-b border-gray-500\" key={game.id}>\r\n                    <Link to={`/details/${game.slug}`} className=\"flex\">\r\n                    <img src={game.background_image} alt=\"\" className=\"w-24 pr-2\"/>\r\n                    <div className=\"text-2x1 font-bold\">{game.name}</div>\r\n                    <div>{game.rating}</div>\r\n                    </Link>\r\n                    <button  className=\"flex-grow\"\r\n                    onClick={ () => { addBookmark(game) } }>\r\n                    { isBookmarked(game.id) ? \"★\" : \"☆\" } </button>\r\n                </li>\r\n                \r\n            ))}\r\n        </ul>\r\n        \r\n        </>\r\n    );\r\n}\r\n \r\nexport default Home;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}