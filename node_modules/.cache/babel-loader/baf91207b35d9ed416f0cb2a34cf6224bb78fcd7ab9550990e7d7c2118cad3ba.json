{"ast":null,"code":"import'./App.css';import Home from'./pages/Home';import React,{useEffect,useRef,useState}from'react';import{createBrowserRouter,RouterProvider}from'react-router-dom';import ErrorMessage from'./pages/ErrorMessage';import Details from'./pages/Details';import BookmarksContext from'./pages/BookmarksContext';import Bookmarks from'./pages/Bookmarks';import MyShop from'./pages/MyShop';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[bookmarks,setBookmarks]=useState([{slug:\"super-mario-bros-3\",name:\"Super Mario Bros. 3\",background_image:\"https://media.rawg.io/media/screenshots/0992/092fc1910f067a95a07c0fbfd\"},{slug:\"the-legend-of-zelda-the-wind-waker\",name:\"The Legend of Zelda: The Wind Waker\",background_image:\"https://\"}]);const[dataLoaded,setDataLoaded]=useState(false);useEffect(()=>{if(dataLoaded){console.log(\"Sauvegarde:\",bookmarks);localStorage.setItem(\"bookmarks\",JSON.stringify(bookmarks));}},[bookmarks]);useEffect(()=>{const savedBookmarks=JSON.parse(localStorage.getItem(\"bookmarks\")||\"[]\");setBookmarks(savedBookmarks);console.log(\"Chargement:\",savedBookmarks);setDataLoaded(true);},[]);const[install,setInstall]=useState(false);// Création du routeur\nconst router=createBrowserRouter([{path:\"/\",element:/*#__PURE__*/_jsx(Home,{}),errorElement:/*#__PURE__*/_jsx(ErrorMessage,{})},{path:\"/details/:slug\",element:/*#__PURE__*/_jsx(Details,{})},// On ajoute cette route\n{path:\"/bookmarks\",element:/*#__PURE__*/_jsx(Bookmarks,{})},{path:\"/shop\",element:/*#__PURE__*/_jsx(MyShop,{})}],{basename:\"/appGames\"});const deferredPrompt=useRef(null);useEffect(()=>{const handler=e=>{e.PreventDefault();setInstall(e.prompt);};window.addEventListener('beforeinstallprompt',handler);return()=>{window.removeEventListener('beforeinstallprompt',handler);};},[]);const handleInstall=()=>{deferredPrompt.current.prompt();deferredPrompt.current.userChoice.then(choiceResult=>{if(choiceResult.outcome==='accepted'){alert(\"Merci d'avoir installé l'application !\");}else{console.log('L\\'utilisateur a refusé l\\'installation');}deferredPrompt.current=null;});setInstall(false);};return/*#__PURE__*/ (// Nous avions passé des données au context dans App.js:\n_jsxs(BookmarksContext.Provider,{value:{bookmarks,setBookmarks},children:[install&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-300 shadow-gray-700 p-4 flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-grow text-center\",children:\"Voulez-vous installer l'application sur votre appareil?\"}),/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 rounded text-white bg-teal-600\",onClick:handleInstall,children:\"Installer\"})]}),/*#__PURE__*/_jsx(RouterProvider,{router:router})]}));}export default App;","map":{"version":3,"names":["Home","React","useEffect","useRef","useState","createBrowserRouter","RouterProvider","ErrorMessage","Details","BookmarksContext","Bookmarks","MyShop","jsx","_jsx","jsxs","_jsxs","App","bookmarks","setBookmarks","slug","name","background_image","dataLoaded","setDataLoaded","console","log","localStorage","setItem","JSON","stringify","savedBookmarks","parse","getItem","install","setInstall","router","path","element","errorElement","basename","deferredPrompt","handler","e","PreventDefault","prompt","window","addEventListener","removeEventListener","handleInstall","current","userChoice","then","choiceResult","outcome","alert","Provider","value","children","className","onClick"],"sources":["C:/Users/jean-fra.vu/Documents/React/appGames/src/App.js"],"sourcesContent":["import './App.css';\nimport Home from './pages/Home';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { createBrowserRouter, RouterProvider } from 'react-router-dom';\nimport ErrorMessage from './pages/ErrorMessage';\nimport Details from './pages/Details';\nimport BookmarksContext from './pages/BookmarksContext';\nimport Bookmarks from './pages/Bookmarks';\nimport MyShop from './pages/MyShop';\n \n\n\n\nfunction App(){\n\n  const [bookmarks, setBookmarks] = useState([\n    {\n      slug: \"super-mario-bros-3\",\n      name: \"Super Mario Bros. 3\",\n      background_image:\n      \"https://media.rawg.io/media/screenshots/0992/092fc1910f067a95a07c0fbfd\"\n    },\n    {\n      slug: \"the-legend-of-zelda-the-wind-waker\",\n      name: \"The Legend of Zelda: The Wind Waker\",\n      background_image:\"https://\"\n    }\n  ]);\n\n  const [dataLoaded, setDataLoaded] = useState(false);\n\n  useEffect(() => {\n  if (dataLoaded) {\n  console.log(\"Sauvegarde:\", bookmarks) \n  localStorage.setItem(\"bookmarks\", JSON.stringify(bookmarks));\n  }\n  },[bookmarks]);\n\n  useEffect(() => {\n  const savedBookmarks = JSON.parse(localStorage.getItem(\"bookmarks\") || \"[]\");\n  setBookmarks(savedBookmarks);\n  console.log(\"Chargement:\", savedBookmarks);\n  setDataLoaded(true);\n  }, []);\n  \nconst [install, setInstall] = useState(false);\n\n\n  // Création du routeur\n  const router = createBrowserRouter([\n    {\n      path: \"/\",\n      element: <Home />,\n      errorElement: <ErrorMessage />,\n    },\n    {\n      path: \"/details/:slug\",\n      element: <Details />,\n    },\n    // On ajoute cette route\n    {\n      path: \"/bookmarks\",\n      element: <Bookmarks />,\n    },\n    {\n      path:\"/shop\",\n      element:<MyShop />,\n    }\n  ], { basename: \"/appGames\" })\n \n  const deferredPrompt = useRef(null);\n\n  useEffect( () => {\n    const handler = (e) =>{\n      e.PreventDefault();\n      setInstall(e.prompt);\n    };\n\n    window.addEventListener('beforeinstallprompt', handler);\n    return () => {\n    window.removeEventListener('beforeinstallprompt', handler);\n    };\n  },[]);\n\n  const handleInstall = () => {\n  deferredPrompt.current.prompt();\n  deferredPrompt.current.userChoice.then( (choiceResult) => {\n  if(choiceResult.outcome==='accepted') {\n  alert(\"Merci d'avoir installé l'application !\");\n  } else\n  {\n    console.log('L\\'utilisateur a refusé l\\'installation');\n  }\n  deferredPrompt.current = null;\n});\n  setInstall(false);\n}\n\n  return (\n    // Nous avions passé des données au context dans App.js:\n    <BookmarksContext.Provider value={{ bookmarks, setBookmarks }}>\n      {install && (\n        <div className='bg-gray-300 shadow-gray-700 p-4 flex items-center'>\n          <div className='flex-grow text-center'>Voulez-vous installer l'application sur votre appareil?</div>\n          <button className='px-4 py-2 rounded text-white bg-teal-600' onClick={handleInstall}>Installer</button>\n        </div>\n      )}\n    <RouterProvider router={router}></RouterProvider>\n    </BookmarksContext.Provider>\n  );\n  \n\n}\n \nexport default App;"],"mappings":"AAAA,MAAO,WAAW,CAClB,MAAO,CAAAA,IAAI,KAAM,cAAc,CAC/B,MAAO,CAAAC,KAAK,EAAIC,SAAS,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAC1D,OAASC,mBAAmB,CAAEC,cAAc,KAAQ,kBAAkB,CACtE,MAAO,CAAAC,YAAY,KAAM,sBAAsB,CAC/C,MAAO,CAAAC,OAAO,KAAM,iBAAiB,CACrC,MAAO,CAAAC,gBAAgB,KAAM,0BAA0B,CACvD,MAAO,CAAAC,SAAS,KAAM,mBAAmB,CACzC,MAAO,CAAAC,MAAM,KAAM,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAKpC,QAAS,CAAAC,GAAGA,CAAA,CAAE,CAEZ,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGd,QAAQ,CAAC,CACzC,CACEe,IAAI,CAAE,oBAAoB,CAC1BC,IAAI,CAAE,qBAAqB,CAC3BC,gBAAgB,CAChB,wEACF,CAAC,CACD,CACEF,IAAI,CAAE,oCAAoC,CAC1CC,IAAI,CAAE,qCAAqC,CAC3CC,gBAAgB,CAAC,UACnB,CAAC,CACF,CAAC,CAEF,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CAEnDF,SAAS,CAAC,IAAM,CAChB,GAAIoB,UAAU,CAAE,CAChBE,OAAO,CAACC,GAAG,CAAC,aAAa,CAAER,SAAS,CAAC,CACrCS,YAAY,CAACC,OAAO,CAAC,WAAW,CAAEC,IAAI,CAACC,SAAS,CAACZ,SAAS,CAAC,CAAC,CAC5D,CACA,CAAC,CAAC,CAACA,SAAS,CAAC,CAAC,CAEdf,SAAS,CAAC,IAAM,CAChB,KAAM,CAAA4B,cAAc,CAAGF,IAAI,CAACG,KAAK,CAACL,YAAY,CAACM,OAAO,CAAC,WAAW,CAAC,EAAI,IAAI,CAAC,CAC5Ed,YAAY,CAACY,cAAc,CAAC,CAC5BN,OAAO,CAACC,GAAG,CAAC,aAAa,CAAEK,cAAc,CAAC,CAC1CP,aAAa,CAAC,IAAI,CAAC,CACnB,CAAC,CAAE,EAAE,CAAC,CAER,KAAM,CAACU,OAAO,CAAEC,UAAU,CAAC,CAAG9B,QAAQ,CAAC,KAAK,CAAC,CAG3C;AACA,KAAM,CAAA+B,MAAM,CAAG9B,mBAAmB,CAAC,CACjC,CACE+B,IAAI,CAAE,GAAG,CACTC,OAAO,cAAExB,IAAA,CAACb,IAAI,GAAE,CAAC,CACjBsC,YAAY,cAAEzB,IAAA,CAACN,YAAY,GAAE,CAC/B,CAAC,CACD,CACE6B,IAAI,CAAE,gBAAgB,CACtBC,OAAO,cAAExB,IAAA,CAACL,OAAO,GAAE,CACrB,CAAC,CACD;AACA,CACE4B,IAAI,CAAE,YAAY,CAClBC,OAAO,cAAExB,IAAA,CAACH,SAAS,GAAE,CACvB,CAAC,CACD,CACE0B,IAAI,CAAC,OAAO,CACZC,OAAO,cAACxB,IAAA,CAACF,MAAM,GAAE,CACnB,CAAC,CACF,CAAE,CAAE4B,QAAQ,CAAE,WAAY,CAAC,CAAC,CAE7B,KAAM,CAAAC,cAAc,CAAGrC,MAAM,CAAC,IAAI,CAAC,CAEnCD,SAAS,CAAE,IAAM,CACf,KAAM,CAAAuC,OAAO,CAAIC,CAAC,EAAI,CACpBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBT,UAAU,CAACQ,CAAC,CAACE,MAAM,CAAC,CACtB,CAAC,CAEDC,MAAM,CAACC,gBAAgB,CAAC,qBAAqB,CAAEL,OAAO,CAAC,CACvD,MAAO,IAAM,CACbI,MAAM,CAACE,mBAAmB,CAAC,qBAAqB,CAAEN,OAAO,CAAC,CAC1D,CAAC,CACH,CAAC,CAAC,EAAE,CAAC,CAEL,KAAM,CAAAO,aAAa,CAAGA,CAAA,GAAM,CAC5BR,cAAc,CAACS,OAAO,CAACL,MAAM,CAAC,CAAC,CAC/BJ,cAAc,CAACS,OAAO,CAACC,UAAU,CAACC,IAAI,CAAGC,YAAY,EAAK,CAC1D,GAAGA,YAAY,CAACC,OAAO,GAAG,UAAU,CAAE,CACtCC,KAAK,CAAC,wCAAwC,CAAC,CAC/C,CAAC,IACD,CACE9B,OAAO,CAACC,GAAG,CAAC,yCAAyC,CAAC,CACxD,CACAe,cAAc,CAACS,OAAO,CAAG,IAAI,CAC/B,CAAC,CAAC,CACAf,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAEC,oBACE;AACAnB,KAAA,CAACN,gBAAgB,CAAC8C,QAAQ,EAACC,KAAK,CAAE,CAAEvC,SAAS,CAAEC,YAAa,CAAE,CAAAuC,QAAA,EAC3DxB,OAAO,eACNlB,KAAA,QAAK2C,SAAS,CAAC,mDAAmD,CAAAD,QAAA,eAChE5C,IAAA,QAAK6C,SAAS,CAAC,uBAAuB,CAAAD,QAAA,CAAC,yDAAuD,CAAK,CAAC,cACpG5C,IAAA,WAAQ6C,SAAS,CAAC,0CAA0C,CAACC,OAAO,CAAEX,aAAc,CAAAS,QAAA,CAAC,WAAS,CAAQ,CAAC,EACpG,CACN,cACH5C,IAAA,CAACP,cAAc,EAAC6B,MAAM,CAAEA,MAAO,CAAiB,CAAC,EACtB,CAAC,EAIhC,CAEA,cAAe,CAAAnB,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}